<!-- Copyright (c) 2025 Huawei Technologies Co., Ltd. -->
<!-- This program is free software, you can redistribute it and/or modify it under the terms and conditions of -->
<!-- CANN Open Software License Agreement Version 2.0 (the "License"). -->
<!-- Please refer to the License for details. You may not use this file except in compliance with the License. -->
<!-- THIS SOFTWARE IS PROVIDED ON AN "AS IS" BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED, -->
<!-- INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE. -->
<!-- See LICENSE in the root of the software repository for the full text of the License. -->

# asc.language.basic

## Common operations

| [`copy`](generated/asc.language.basic.copy.md#asc.language.basic.copy)                                                                         | 在 Vector Core 的不同内部存储单元（VECIN, VECCALC, VECOUT）之间进行数据搬运。                                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [`data_cache_clean_and_invalid`](generated/asc.language.basic.data_cache_clean_and_invalid.md#asc.language.basic.data_cache_clean_and_invalid) | 用来刷新Cache，保证Cache与Global Memory之间的数据一致性。                                                                                               |
| [`data_copy`](generated/asc.language.basic.data_copy.md#asc.language.basic.data_copy)                                                          | DataCopy系列接口提供全面的数据搬运功能，支持多种数据搬运场景，并可在搬运过程中实现随路格式转换和量化激活等操作。 该接口支持Local Memory与Global Memory之间的数据搬运，以及Local Memory内部的数据搬运。             |
| [`data_copy_pad`](generated/asc.language.basic.data_copy_pad.md#asc.language.basic.data_copy_pad)                                              | DataCopyPad接口提供数据非对齐搬运的功能，其中从Global Memory搬运数据至Local Memory时，可以根据开发者的需要自行填充数据。                                                         |
| [`dump_tensor`](generated/asc.language.basic.dump_tensor.md#asc.language.basic.dump_tensor)                                                    | 基于算子工程开发的算子，可以使用该接口Dump指定Tensor的内容。                                                                                                    |
| [`duplicate`](generated/asc.language.basic.duplicate.md#asc.language.basic.duplicate)                                                          | 将一个变量或立即数复制多次并填充到向量中。                                                                                                                  |
| [`get_block_idx`](generated/asc.language.basic.get_block_idx.md#asc.language.basic.get_block_idx)                                              | 获取当前核的index，用于代码内部的多核逻辑控制及多核偏移量计算等。                                                                                                    |
| [`get_block_num`](generated/asc.language.basic.get_block_num.md#asc.language.basic.get_block_num)                                              | 获取当前任务配置的核数，用于代码内部的多核逻辑控制等。                                                                                                            |
| [`get_data_block_size_in_bytes`](generated/asc.language.basic.get_data_block_size_in_bytes.md#asc.language.basic.get_data_block_size_in_bytes) | 获取当前芯片版本一个datablock的大小，单位为byte。 开发者可以根据datablock的大小来计算API指令中待传入的repeatTime、 DataBlock Stride、Repeat Stride等参数值。                        |
| [`get_icache_preload_status`](generated/asc.language.basic.get_icache_preload_status.md#asc.language.basic.get_icache_preload_status)          | 获取ICACHE的PreLoad的状态。                                                                                                                   |
| [`get_program_counter`](generated/asc.language.basic.get_program_counter.md#asc.language.basic.get_program_counter)                            | 获取程序计数器的指针，程序计数器用于记录当前程序执行的位置。                                                                                                         |
| [`get_system_cycle`](generated/asc.language.basic.get_system_cycle.md#asc.language.basic.get_system_cycle)                                     | 获取当前系统cycle数，若换算成时间需要按照50MHz的频率，时间单位为us，换算公式为：time = (cycle数/50) us 。                                                                  |
| [`get_sys_workspace`](generated/asc.language.basic.get_sys_workspace.md#asc.language.basic.get_sys_workspace)                                  | 获取系统workspace指针。                                                                                                                       |
| [`icache_preload`](generated/asc.language.basic.icache_preload.md#asc.language.basic.icache_preload)                                           | 从指令所在DDR地址预加载指令到ICache中。                                                                                                               |
| [`pipe_barrier`](generated/asc.language.basic.pipe_barrier.md#asc.language.basic.pipe_barrier)                                                 | 阻塞相同流水，具有数据依赖的相同流水之间需要插入此同步。                                                                                                           |
| [`printf`](generated/asc.language.basic.printf.md#asc.language.basic.printf)                                                                   | 该接口提供CPU域/NPU域调试场景下的格式化输出功能。 在算子kernel侧实现代码中需要输出日志信息的地方调用printf接口打印相关内容。                                                               |
| [`proposal_concat`](generated/asc.language.basic.proposal_concat.md#asc.language.basic.proposal_concat)                                        | 将连续元素合入Region Proposal内对应位置，每次迭代会将16个连续元素合入到16个Region Proposals的对应位置里。                                                                 |
| [`proposal_extract`](generated/asc.language.basic.proposal_extract.md#asc.language.basic.proposal_extract)                                     | 与ProposalConcat功能相反，从Region Proposals内将相应位置的单个元素抽取后重排，每次迭代处理16个Region Proposals，抽取16个元素后连续排列。                                          |
| [`scatter`](generated/asc.language.basic.scatter.md#asc.language.basic.scatter)                                                                | 给定一个连续的输入张量和一个目的地址偏移张量，scatter指令根据偏移地址生成新的结果张量后将输入张量分散到结果张量中。 将源操作数src中的元素按照指定的位置（由dst_offset和dst_base共同作用）分散到目的操作数dst中。               |
| [`set_aipp_functions`](generated/asc.language.basic.set_aipp_functions.md#asc.language.basic.set_aipp_functions)                               | 设置图片预处理（AIPP，AI core pre-process）相关参数。和LoadImageToLocal(ISASI)接口配合使用。 设置后，调用LoadImageToLocal(ISASI)接口可在搬运过程中完成图像预处理操作。                 |
| [`set_atomic_add`](generated/asc.language.basic.set_atomic_add.md#asc.language.basic.set_atomic_add)                                           | 调用该接口后，可对后续的从VECOUT/L0C/L1到GM的数据传输开启原子累加， 通过dtype参数设定不同类型的数据。                                                                          |
| [`set_atomic_max`](generated/asc.language.basic.set_atomic_max.md#asc.language.basic.set_atomic_max)                                           | 原子操作函数，设置后续从VECOUT传输到GM的数据是否执行原子比较： 将待拷贝的内容和GM已有内容进行比较，将最大值写入GM。 可通过设置模板参数来设定不同的数据类型。                                                  |
| [`set_atomic_min`](generated/asc.language.basic.set_atomic_min.md#asc.language.basic.set_atomic_min)                                           | 原子操作函数，设置后续从VECOUT传输到GM的数据是否执行原子比较， 将待拷贝的内容和GM已有内容进行比较，将最小值写入GM。 可通过设置模板参数来设定不同的数据类型。                                                  |
| [`set_atomic_none`](generated/asc.language.basic.set_atomic_none.md#asc.language.basic.set_atomic_none)                                        | 清空原子操作的状态。                                                                                                                             |
| [`set_atomic_type`](generated/asc.language.basic.set_atomic_type.md#asc.language.basic.set_atomic_type)                                        | 通过设置模板参数来设定原子操作不同的数据类型。                                                                                                                |
| [`set_flag`](generated/asc.language.basic.set_flag.md#asc.language.basic.set_flag)                                                             | 同一核内不同流水线之间的同步指令，具有数据依赖的不同流水指令之间需要插此同步。                                                                                                |
| [`set_deq_scale`](generated/asc.language.basic.set_deq_scale.md#asc.language.basic.set_deq_scale)                                              | 设置DEQSCALE寄存器的值。                                                                                                                       |
| [`set_vector_mask`](generated/asc.language.basic.set_vector_mask.md#asc.language.basic.set_vector_mask)                                        | 用于在矢量计算时设置mask。使用前需要先调用 SetMaskCount/SetMaskNorm 设置 mask 模式。 在不同模式下，mask的含义不同：                                                         |
| [`transpose`](generated/asc.language.basic.transpose.md#asc.language.basic.transpose)                                                          | 用于实现16 \* 16的二维矩阵数据块转置或者[N,C,H,W]与[N,H,W,C]数据格式互相转换。                                                                                   |
| [`trans_data_to_5hd`](generated/asc.language.basic.trans_data_to_5hd.md#asc.language.basic.trans_data_to_5hd)                                  | 数据格式转换，一般用于将NCHW格式转换成NC1HWC0格式，也可用于二维矩阵数据块的转置。 相比于Transpose接口，本接口单次repeat内可处理512Byte的数据（16个datablock）， 支持不同shape的矩阵转置，还可以支持多次repeat操作。 |
| [`trap`](generated/asc.language.basic.trap.md#asc.language.basic.trap)                                                                         | 在Kernel侧调用，NPU模式下会中断AI Core的运行，CPU模式下等同于assert。可用于Kernel侧异常场景的调试。                                                                      |
| [`wait_flag`](generated/asc.language.basic.wait_flag.md#asc.language.basic.wait_flag)                                                          | 同一核内不同流水线之间的同步指令，具有数据依赖的不同流水指令之间需要插此同步。                                                                                                |

## Scalar operations

| [`scalar_cast`](generated/asc.language.basic.scalar_cast.md#asc.language.basic.scalar_cast)                            | 对标量的数据类型进行转换。                                                            |
|------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
| [`scalar_get_sff_value`](generated/asc.language.basic.scalar_get_sff_value.md#asc.language.basic.scalar_get_sff_value) | 获取一个 uint64_t 类型数字的二进制表示中，从最低有效位（LSB）开始第一个 0 或 1 出现的位置。 如果未找到指定值，则返回 -1。 |

## Vector binary operations

| [`add`](generated/asc.language.basic.add.md#asc.language.basic.add)                                                          | 按元素求和。                                                                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`add_deq_relu`](generated/asc.language.basic.add_deq_relu.md#asc.language.basic.add_deq_relu)                               | 依次计算按元素求和、结果进行deq量化后再进行relu计算（结果和0对比取较大值）。                                                                                                                                                                                                                                                                                                                                  |
| [`add_relu`](generated/asc.language.basic.add_relu.md#asc.language.basic.add_relu)                                           | 按元素求和，再进行Relu计算（结果和0对比取较大值）。                                                                                                                                                                                                                                                                                                                                                |
| [`add_relu_cast`](generated/asc.language.basic.add_relu_cast.md#asc.language.basic.add_relu_cast)                            | 按元素求和，结果和0对比取较大值，并根据源操作数和目的操作数Tensor的数据类型进行精度转换。                                                                                                                                                                                                                                                                                                                            |
| [`bilinear_interpolation`](generated/asc.language.basic.bilinear_interpolation.md#asc.language.basic.bilinear_interpolation) | 分为水平迭代和垂直迭代。 每个水平迭代顺序地从src0Offset读取8个偏移值，表示src0的偏移，每个偏移值指向src0的一个DataBlock的起始地址，如果repeatMode=false，从src1中取一个值， 与src0中8个DataBlock中每个值进行乘操作；如果repeatMode=true，从src1中取8个值，按顺序与src0中8个DataBlock中的值进行乘操作， 最后当前迭代的dst结果与前一个dst结果按DataBlock进行累加，存入目的地址，在同一个水平迭代内dst地址不变。 然后进行垂直迭代，垂直迭代的dst起始地址为上一轮垂直迭代的dst起始地址加上vROffset，本轮垂直迭代占用dst空间为dst起始地址之后的8个DataBlock，每轮垂直迭代进行hRepeat次水平迭代。 |
| [`bitwise_and`](generated/asc.language.basic.bitwise_and.md#asc.language.basic.bitwise_and)                                  | 每对elements按位与运算。命名为 bitwise_and 避免与Python关键字重名。                                                                                                                                                                                                                                                                                                                             |
| [`bitwise_or`](generated/asc.language.basic.bitwise_or.md#asc.language.basic.bitwise_or)                                     | 每对elements按位或运算。命名为 bitwise_or 避免与Python关键字重名。                                                                                                                                                                                                                                                                                                                              |
| [`div`](generated/asc.language.basic.div.md#asc.language.basic.div)                                                          | 按元素求商。                                                                                                                                                                                                                                                                                                                                                                      |
| [`fused_mul_add`](generated/asc.language.basic.fused_mul_add.md#asc.language.basic.fused_mul_add)                            | 按元素将src0和dst相乘并加上src1，最终结果存放入dst。                                                                                                                                                                                                                                                                                                                                           |
| [`fused_mul_add_relu`](generated/asc.language.basic.fused_mul_add_relu.md#asc.language.basic.fused_mul_add_relu)             | 按元素将src0和dst相乘并加上src1，再进行Relu计算（结果和0对比取较大值），最终结果存放进dst中。                                                                                                                                                                                                                                                                                                                    |
| [`max`](generated/asc.language.basic.max.md#asc.language.basic.max)                                                          | 按元素求最大值。                                                                                                                                                                                                                                                                                                                                                                    |
| [`min`](generated/asc.language.basic.min.md#asc.language.basic.min)                                                          | 按元素求最小值。                                                                                                                                                                                                                                                                                                                                                                    |
| [`mul`](generated/asc.language.basic.mul.md#asc.language.basic.mul)                                                          | 按元素求积。                                                                                                                                                                                                                                                                                                                                                                      |
| [`mul_add_dst`](generated/asc.language.basic.mul_add_dst.md#asc.language.basic.mul_add_dst)                                  | 按元素将src0和src1相乘并和dst相加，将最终结果存放进dst中。                                                                                                                                                                                                                                                                                                                                        |
| [`mul_cast`](generated/asc.language.basic.mul_cast.md#asc.language.basic.mul_cast)                                           | 按元素求积，并根据源操作数和目的操作数Tensor的数据类型进行精度转换。                                                                                                                                                                                                                                                                                                                                       |
| [`sub`](generated/asc.language.basic.sub.md#asc.language.basic.sub)                                                          | 按元素求差。                                                                                                                                                                                                                                                                                                                                                                      |
| [`sub_relu`](generated/asc.language.basic.sub_relu.md#asc.language.basic.sub_relu)                                           | 按元素求差，再进行Relu计算（结果和0对比取较大值）。                                                                                                                                                                                                                                                                                                                                                |
| [`sub_relu_cast`](generated/asc.language.basic.sub_relu_cast.md#asc.language.basic.sub_relu_cast)                            | 按元素求差，结果和0对比取较大值，并根据源操作数和目的操作数Tensor的数据类型进行精度转换。                                                                                                                                                                                                                                                                                                                            |

## Vector reduce operations

| [`pair_reduce_sum`](generated/asc.language.basic.pair_reduce_sum.md#asc.language.basic.pair_reduce_sum)       | PairReduceSum：相邻两个（奇偶）元素求和。例如，对于序列 (a1, a2, a3, a4, a5, a6, ...)， 相邻两个数据求和为 (a1+a2, a3+a4, a5+a6, ...)。   |
|---------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
| [`repeat_reduce_sum`](generated/asc.language.basic.repeat_reduce_sum.md#asc.language.basic.repeat_reduce_sum) | 对每个 repeat 内的所有数据进行求和。 与 WholeReduceSum 接口相比，不支持 mask 逐比特模式。 建议使用功能更全面的 WholeReduceSum 接口。                |
| [`whole_reduce_max`](generated/asc.language.basic.whole_reduce_max.md#asc.language.basic.whole_reduce_max)    | 每个repeat内所有数据求最大值以及其索引index，返回的索引值为每个repeat内部索引。 归约指令的总体介绍请参考如何使用归约指令。                                    |
| [`whole_reduce_min`](generated/asc.language.basic.whole_reduce_min.md#asc.language.basic.whole_reduce_min)    | 每个repeat内所有数据求最小值以及其索引index，返回的索引值为每个repeat内部索引。 归约指令的总体介绍请参考如何使用归约指令。                                    |
| [`whole_reduce_sum`](generated/asc.language.basic.whole_reduce_sum.md#asc.language.basic.whole_reduce_sum)    | 每个迭代内所有数据求和。归约指令的总体介绍请参考如何使用归约指令。                                                                         |

## Vector-scalar operations

| [`adds`](generated/asc.language.basic.adds.md#asc.language.basic.adds)                      | 矢量内每个元素与标量求和。                                   |
|---------------------------------------------------------------------------------------------|-------------------------------------------------|
| [`leaky_relu`](generated/asc.language.basic.leaky_relu.md#asc.language.basic.leaky_relu)    | 按元素执行Leaky ReLU（Leaky Rectified Linear Unit）操作。 |
| [`maxs`](generated/asc.language.basic.maxs.md#asc.language.basic.maxs)                      | 源操作数矢量内每个元素与标量相比，如果比标量大，则取源操作数值，比标量的值小，则取标量值。   |
| [`mins`](generated/asc.language.basic.mins.md#asc.language.basic.mins)                      | 源操作数矢量内每个元素与标量相比，如果比标量大，则取标量值，比标量的值小，则取源操作数。    |
| [`muls`](generated/asc.language.basic.muls.md#asc.language.basic.muls)                      | 矢量内每个元素与标量求积。                                   |
| [`shift_left`](generated/asc.language.basic.shift_left.md#asc.language.basic.shift_left)    | 对源操作数中的每个元素进行左移操作，左移的位数由输入参数scalarValue决定。      |
| [`shift_right`](generated/asc.language.basic.shift_right.md#asc.language.basic.shift_right) | 对源操作数中的每个元素进行右移操作，右移的位数由输入参数scalarValue决定。      |

## Vector unary operations

| [`abs`](generated/asc.language.basic.abs.md#asc.language.basic.abs)                         | 按元素取绝对值。                                                                       |
|---------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
| [`exp`](generated/asc.language.basic.exp.md#asc.language.basic.exp)                         | 按元素取自然指数。                                                                      |
| [`ln`](generated/asc.language.basic.ln.md#asc.language.basic.ln)                            | 按元素取自然对数。                                                                      |
| [`bitwise_not`](generated/asc.language.basic.bitwise_not.md#asc.language.basic.bitwise_not) | 按元素做按位取反。命名为 bitwise_not 避免与Python关键字重名。                                       |
| [`gather_mask`](generated/asc.language.basic.gather_mask.md#asc.language.basic.gather_mask) | 以内置固定模式对应的二进制或者用户自定义输入的Tensor数值对应的二进制为gather mask（数据收集的掩码），从源操作数中选取元素写入目的操作数中。 |
| [`reciprocal`](generated/asc.language.basic.reciprocal.md#asc.language.basic.reciprocal)    | 按元素取倒数。                                                                        |
| [`relu`](generated/asc.language.basic.relu.md#asc.language.basic.relu)                      | 按元素做线性整流Relu。                                                                  |
| [`rsqrt`](generated/asc.language.basic.rsqrt.md#asc.language.basic.rsqrt)                   | 按元素进行开方后取倒数的计算。                                                                |
| [`sqrt`](generated/asc.language.basic.sqrt.md#asc.language.basic.sqrt)                      | 按元素做开方。                                                                        |
